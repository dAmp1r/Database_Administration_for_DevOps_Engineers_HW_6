# Database_Administration_for_DevOps_Engineers_HW_6

*Troubleshooting - Горбунов Д.Н.*

Задание 1.

- необходимо найти нужную операция  db.currentOp()                   
  для прерывания операции использовать db.killOp(<opId>)

- для исбежания схожих ситуаций можно установить ttl операции - maxTimeMS()

Задание 2.

- Вероятно из документации Redis
  
```
Latency generated by expires
Redis evict expired keys in two ways:

One lazy way expires a key when it is requested by a command, but it is found to be already expired.
One active way expires a few keys every 100 milliseconds.
The active expiring is designed to be adaptive. An expire cycle is started every 100 milliseconds (10 times per second), and will do the following:

Sample ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP keys, evicting all the keys already expired.
If the more than 25% of the keys were found expired, repeat.

Basically this means that if the database has many, many keys expiring in the same second, and these make up at least 25% of the current population of keys with an expire set, Redis can block in order to get the percentage of keys already expired below 25%.

In short: be aware that many keys expiring at the same moment can be a source of latency.
```

Задание 3.

Искходя из информации : Ошибка 2013 возникает, когда соединение между клиентом MySQL и сервером базы данных обрывается, обычно потому, что базе данных требуется слишком много времени для ответа.
Проверить качество соединения с базой ( интернет ) и попробовать увеличить значение <code> net-read-timeout </code>, чтобы дать больше времени для выполнения запроса.

Задание 4.

исходя из вывода ```postmaster invoked oom-killer``` системе не хватает оперативной памяти и она принудительного завершает выбранные запущенные процессы.      
Самое простое - это увеличить оперативную память и swap... но это вероятно лишь отложит время до повторения проблемы

Доработка:
Настроить праметры использования памяти PostgreSQL: max_connections, shared_buffer, work_mem, effective_cache_size, maintenance_work_mem
